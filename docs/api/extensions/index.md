# Extensions

Both [createMiddleware](../create-middleware.md) and
[createMetaReducer](../create-meta-reducer.md) accept an extensions
object as their second parameter. If provided, an extensions object
should have at least one of the following properties:

```js
{
  customDataLayer,
  logger,
  offlineStorage,
}
```

Each property corresponds to a different type of extension that
ReduxGTM supports:
 - [`customDataLayer` extensions](#customdatalayer-extensions)
 - [`offlineStorage` extensions](#offlinestorage-extensions)
 - [`logger` extensions](#logger-extensions)

As an added convenience ReduxGTM exposes some prebuilt extension constructors:

| Extension Type | Extension Constructor|
| -------------- | -------------- |
| `logger`       | [logger](logger.md)       |
| `offlineStorage` | [offlineWeb](offline-web.md) |
| `offlineStorage` | [offlineReactNative](offline-react-native.md) |

----

#### `customDataLayer` extensions
`customDataLayer` extensions provide an alternative destination for
analytics events that would normally get pushed to the
`window.dataLayer` array. These extensions give ReduxGTM the
flexibility to operate on multiple platforms.

A `customDataLayer` extensions must be an object with a push method
that accepts an event object as an argument.

##### Example

The following example shows how you would use a `customDataLayer`
extension when using ReduxGTM in a React Native application.

```js
import { createStore, applyMiddleware } from 'redux';
import { createMiddlware } from 'redux-gtm';
import { GoogleTagManager } from 'react-native-google-analytics-bridge';

import eventDefinitionsMap from './event-definitions';
import combinedReducer from './reducers';

GoogleTagManager.openContainerWithId('GTM-XXXXXX');

const customDataLayer = {
  push(event) {
    GoogleTagManager.pushDataLayerEvent(event);
  }
}

const gtmMiddleware = createMiddlware(eventDefinitionsMap, { customDataLayer });

const store = createStore(combinedReducer, applyMiddleware(gtmMiddleware));
```

#### logger extensions
`logger` extensions provide a means to log events after they are
generated by ReduxGTM.

#### offlineStorage extensions
`offlineStorage` extensions provide a means to record analytics events
even when your app is offline. An `offlineStorage` extension should
have three methods: `saveEvents`, `purgeEvents`, and
`isConnected`.
