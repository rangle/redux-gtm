# redux-gtm
> Map Redux actions to Google Tag Manager events

## Getting Started

### Installation

```
npm install --save redux-gtm
```

### Example Usage
> Tracking page views using react-router-redux and redux-gtm

Suppose you've created a custom event in Google Tag Manger (GTM) for
tracking page views: `my-app-page-view`. And the custom event triggers a
Google Analytics tag that sends the custom Data Layer variable: `route`.

Suppose also that your application uses `react-router` in combination
with `react-router-redux` to manage routing.

Here's how you would use `redux-gtm` to map the routing actions
generated by `react-router-redux` with your custom GTM event
`my-app-page-view`:

Start by creating a mapping between your Redux actions and you analytics
events. In this example the action type we want to track is defined by
the `LOCATION_CHANGE` constant exposed by `react-router-redux`.

```
// event-definitions.js

import { LOCATION_CHANGE } from 'react-router-redux';

const eventDefinitions = {
  [LOCATION_CHANGE]: {
    eventName: 'my-app-page-view' // The name of the custom GTM event
    eventFields: (state, action) => ({
      // Map the custom Data Layer variable to the new route
      route: action.payload.location.pathname,
    }),
  },
}

export default eventDefinitions;
```

Next, create the middleware using `createMiddleware` and your event
definitions. Then apply the middleware when creating the Redux store.

```
// wherever you are creating the Redux store

import { createMiddleware } from 'redux-gtm'; // **
import eventDefinitions from './event-definitions'; // **
import { createStore } from 'redux';
import reducer from './reducer';

const analyticsMiddleware = createMiddleware(eventDefinitions);

const store = createStore(reducer, applyMiddleware(analyticsMiddleware));
```

That's it!

## Examples

## API
